# ========================================
# CONFIGURACIÓN BASE - PARKING API
# ========================================
# Este archivo contiene la configuración base de la aplicación
# Las configuraciones específicas por perfil están en application-{profile}.properties

# ========================================
# CONFIGURACIÓN DE LA APLICACIÓN
# ========================================
spring.application.name=${APP_NAME:parking-api}
app.environment=${APP_ENVIRONMENT:development}
app.name=${APP_NAME:parking-api}
app.version=${APP_VERSION:1.0.0}
app.timezone=${APP_TIMEZONE:America/Bogota}
app.locale=${APP_LOCALE:es_CO}

# ========================================
# CONFIGURACIÓN DEL SERVIDOR
# ========================================
server.port=${SERVER_PORT:8080}

# ========================================
# CONFIGURACIÓN DE BASE DE DATOS
# ========================================
spring.datasource.url=jdbc:postgresql://localhost:5434/parking
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ========================================
# CONFIGURACIÓN JPA/HIBERNATE
# ========================================
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=${HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.defer-datasource-initialization=${JPA_DEFER_DATASOURCE_INIT:true}

# ========================================
# CONFIGURACIÓN DE SEGURIDAD JWT
# ========================================
app.jwt.secret=${JWT_SECRET:ZmQ0ZGI5NjQ0MDQwY2I4MjMxY2Y3ZmI3MjdhN2ZmYTA=}
app.jwt.expiration=${JWT_EXPIRATION:21600000}
app.jwt.algorithm=${JWT_ALGORITHM:HS256}

# ========================================
# CONFIGURACIÓN DE SCHEDULING
# ========================================
app.scheduler.token-cleanup.cron=${TOKEN_CLEANUP_CRON:0 0 2 * * ?}

# ========================================
# CONFIGURACIÓN DE LOGGING
# ========================================
logging.level.com.nelumbo.parking=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=INFO

# ========================================
# CONFIGURACIÓN DE ACTUATOR
# ========================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true

# ========================================
# CONFIGURACIÓN DE EMAIL (Base - Variables de entorno)
# ========================================
app.email.enabled=true
app.email.smtp.host=smtp.gmail.com
app.email.smtp.port=587
app.email.smtp.username=${EMAIL_USERNAME:}
app.email.smtp.password=${EMAIL_PASSWORD:}
app.email.smtp.auth=true
app.email.smtp.starttls.enable=true

# ========================================
# CONFIGURACIÓN DE PARKING (Base)
# ========================================
app.parking.max-capacity=100
app.parking.hourly-rate=5000
app.parking.daily-rate=50000
app.parking.currency=COP

# ========================================
# CONFIGURACIÓN DE REPORTES (Base)
# ========================================
app.report.max-days-range=365
app.report.default-format=PDF
app.report.enable-export=true

# ========================================
# CONFIGURACIÓN DE CACHE (Base)
# ========================================
spring.cache.type=caffeine
spring.cache.cache-names=parking,vehicles,users
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=600s

# ========================================
# CONFIGURACIÓN DE SEGURIDAD (Base)
# ========================================
app.security.max-login-attempts=5
app.security.lockout-duration=15

# ========================================
# CONFIGURACIÓN DE BASE DE DATOS POOL (Base)
# ========================================
spring.datasource.hikari.maximum-pool-size=${DB_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ========================================
# CONFIGURACIÓN PARA TESTING (H2)
# ========================================
# Para testing, puedes cambiar estas variables en el .env:
# DB_URL=jdbc:h2:mem:testdb
# DB_DRIVER=org.h2.Driver
# HIBERNATE_DIALECT=org.hibernate.dialect.H2Dialect
# JPA_DDL_AUTO=create-drop
# JPA_SHOW_SQL=false

# ========================================
# DATALOADER
# ========================================
dataloader.user.pilot.password=admin